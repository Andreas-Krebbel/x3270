<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
    <head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<title>x3270 Build and Install Instructions</title>
	<link href="http://www.w3.org/StyleSheets/Core/Steely" type="text/css" rel="stylesheet">
    </head>

    <body>
	<h1>x3270 Additional Build and Install Instructions</h1>

	<i>This file describes build and install information specific to
	x3270. For general build information, look
	<a href="Build.html">here</a>.</i>

	<h2> Where Things Get Installed</h2>
	By default, parts of x3270 are installed under two different
	directories.
 
	<p>Files which are specific to X11 (the x3270 binary, x3270 manual
	pages, and fonts) are installed in the system X11 directory (typically
	<tt>/usr/X11R6</tt> or <tt>/usr/openwin</tt>). This directory is
	defined when your system is installed and cannot be easily changed.
	This is referred to as <i>xdir</i> in the table below. </p>
 
	<p>Files which are shared with other non-X11 3270 applications (the
	<i>x3270if</i> binary and man pages, and the configuration files) are 
	installed in the autoconf prefix directory, typically
	<tt>/usr/local</tt>.
	The autoconf prefix directory can be changed with options to the
	<tt>configure</tt> script. This is referred to as <i>prefix</i> in the
	table below.
	<table border="1" cols="2" width="100%">
	    <tbody>
		<tr>
		    <td><b>Files</b></td>
		    <td><b>Installed In</b></td>
		</tr>
		<tr>
		    <td>Binary for x3270</td>
		    <td><tt><i>xdir</i>/bin</tt></td>
		</tr>
		<tr>
		    <td>Manual pages for x3270</td>
		    <td><tt><i>xdir</i>/man</tt></td>
		</tr>
		<tr>
		    <td>Fonts</td>
		    <td><tt><i>xdir</i>/fonts/misc</tt></td>
		</tr>
		<tr>
		    <td>Binaries for <i>x3270if</i></td>
		    <td><tt><i>prefix</i>/bin</tt></td>
		</tr>
		<tr>
		    <td>Manual page for <i>x3720if</i></td>
		    <td><tt><i>prefix</i>/man</tt></td>
		</tr>
		<tr>
		    <td>Configuration files (<tt>ibm_hosts</tt>, character set
			definitions) used by x3270 and other programs</td>
		    <td><tt><i>prefix</i>/etc</tt></td>
		</tr>

	    </tbody> 
	</table>

	If you want everything installed in your system X11 directory, use the
	following <tt>configure</tt> command:
	<pre>   configure --with-all-xinstall</pre>
	By contrast, if you want everyting to be installed in the autoconf
	prefix directory, use the default <tt>configure</tt> command, but use a
	different <tt>make</tt> target:  
	<pre>   make install.byprefix</pre>
	The top-level target <tt>x3270-install.byprefix</tt> will also work,
	and will install just x3270 and not all of the configured programs.

	<h2>Installing Fonts</h2>
	x3270 prefers that its fonts be installed in order to run. However,
	a script is provided for testing a local copy of x3270 in the current
	directory:  
	<pre>   ./dryrun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # test x3270</pre>
	Before running x3270, you will also need to (once):  
	<pre>   xset fp rehash</pre>

	<h2> Vanilla X11R6</h2>
	x3270 is set up to build and install without modifications under
	any complete X11R6 or X11R5 implementation.  
	<p>A "complete" R6 or R5 implementation means that <i>xmkmf</i> and
	<i>imake</i> are configured and installed on your system, and that the
	<tt>Xaw</tt> and <tt>Xmu</tt> libraries and header files are installed.
	Some vendors (HP, IBM, SCO) consider these optional software and do not
	always install them.

	<p>If you are running vanilla X11R6, then you simply need to ensure
	that the X11 <tt>bin</tt> directory is in your <tt>$PATH</tt>, and you
	can follow the standard build procedure.

	<h2>IBM AIX</h2>
	AIX may not include <i>xmkmf</i> or <i>imake</i>, but it includes the
	source code for them. If these have not been built and installed on
	your system (<i>e.g.</i>, if there is no such file as
	<tt>/usr/bin/X11/imake</tt>),
	you must first build and install it by following the instructions in
	<tt>/usr/lpp/X11/Xamples/README</tt>.

	<p>Once these have been installed, you can use the standard build
	procedure.

	<p>The default installation of AIX may also not include the
	<i>bdftopcf</i> utility, which may need to be installed separately as
	part of the <b>X11.fnt.util</b> package.

	<h2> HP-UX</h2>
	HP's X11 distribution may not include the <tt>Xaw</tt> libraries or
	header files. As HP's X man page says,  
	<blockquote>A number of unsupported core MIT clients and miscellaneous
	    utilities are provided in /usr/contrib/bin. In addition, the entire
	    core MIT distribution, compiled for Hewlett-Packard platforms, can
	    be obtained from HP's users group INTERWORKS for a nominal fee. See
	    the release notes for details.</blockquote>
	What you need is the <tt>Xaw</tt> and <tt>Xmu</tt> libraries,
	<i>imake</i>, and <i>xmkmf</i>. Then you can follow the standard build
	and install instructions.

	<h2> Sun Solaris 2.x</h2>
	To run x3270, your <tt>LD_LIBRARY_PATH</tt> environment variable
	must include <tt>/usr/openwin/lib</tt>.  

	<h2> Mixed X Environments</h2>
	If you are running a mixture of X environments, such as running a Sun
	XNews server but using X11R6 libraries and header files, the supplied
	<tt>Imakefile</tt> may not work properly, because it assumes that your
	server and libraries are of the same type. This is not an impossible
	situation, just a difficult one. It generally means that you will have
	to build and install the fonts separately, perhaps even by hand.  

	<h2> Building Fonts for X Terminals</h2>
	The Imakefile that comes with x3270 assumes that you plan to run the
	x3270 client on the same workstation as your X server. Therefore it
	builds fonts for that kind of X server. Compiled fonts (.snf or .pcf
	files) are not compatible between different servers, so if you run
	x3270 with its display somewhere else (such as on an X Terminal), you
	will need to compile the fonts for that server. It is impossible to
	give comprehensive instructions here; however, here is an outline for
	how to do it:  
	<ul>
	    Copy all of the <tt>.bdf</tt> files from the x3270 distribution
	    into a new directory, say <tt>XXX</tt>.    
	    <p><i>cd</i> into <tt>XXX</tt>.

	    <p>For each <tt>.bdf</tt> file, run the server-specific version of
	    <i>bdftosnf</i> or <i>bdftopcf</i> to create a <tt>.snf</tt> or
	    <tt>.pcf</tt> file. For example, for to build an NCD font on a
	    Sun-4, the command is: </p>

	    <pre>   /usr/local/NCD/binSun4/bdftosnf 3270.bdf &gt;3270.snf</pre>
	    Run the server-specific version of <i>mkfontdir</i>. For example:    
	    <pre>   /usr/local/NCD/binSun4/mkfontdir .</pre>
	    Then tell your X server to use this directory:    
	    <pre>   xset fp+ XXX
   xset fp rehash</pre>
	</ul>

	<h2>SCO Open Desktop 3</h2>
	x3270 requires the Athena Widgets library, which is available from
	sosco.sco.com.  

	<h2>Using an app-defaults File</h2>
	Earlier versions of x3270 required a separate <b>app-defaults</b> file.
	The app-defaults file contains definitions for options, text strings,
	fonts, colors, etc. The file allows x3270 to be reconfigured without
	recompiling by simply editing the file.  
	<p>Unfortunately, using an app-defaults file is a pain. The mechanism
	for finding the file is so flexible as to be almost incomprehensible,
	and it is difficult to run the program without doing a full
	installation, requiring root access to your system. Also, the
	app-defaults file generally changes whenever the program changes, and
	making sure that x3270 finds the <b>correct</b> app-defaults file
	compounds the above problems. </p>

	<p>Starting with version 3.1, x3270 no longer uses a separate
	app-defaults file. Instead, the file is compiled into x3270 itself.
	If however, you prefer to have a separate app-defaults file, you can
	compile x3270  to use it. </p>

	<p>First, you must decide whether you want app-defaults for a color
	display or a monochrome display. For a color display, the commands are:

	<pre>   ./configure --enable-app-defaults
   make clean
   make</pre>
	For a monochrome display, the commands are:  
	<pre>   ./configure --enable-app-defaults=-UCOLOR
   make clean
   make</pre>

	<h2>x3270-specific <tt>configure</tt> Options</h2>
	The <tt>configure</tt> script accepts the following x3270-specific
	options:
	<table border="3" cellspacing="3" cellpadding="3">
	    <tbody>
		<tr>
		    <td><tt>--with-all-xinstall</tt></td>
		    <td>Install all files (even those that are common with
			other non-X11 3270 programs) in the system's X11
			directory.<br>
			This is compatible with earlier releases of x3270.<br>
			It is equivalent to <tt>--prefix='$(PROJECTROOT)'</tt>.
		    </td>
		</tr>
		<tr>
		    <td><tt>--prefix=<i>prefix</i></tt></td>
		    <td>Install common architecture-independent files under
			<i>prefix</i> (defaults  to <tt>/usr/local</tt>).<br>
			When using <tt>make install</tt>, this affects only the
			configuration files.<br>
			When using <tt>make install.byprefix</tt>, this
			affects all files.</td>
		</tr>
		<tr>
		    <td><tt>--exec-prefix=<i>eprefix</i></tt></td>
		    <td>Install common architecture-dependent files
			(executables) under <i>eprefix</i> (defaults to same as
			<i>prefix</i>).<br>
			See the note under <tt>--prefix</tt>, above.</td>
		</tr>
		<tr>
		    <td><tt>--bindir=<i>dir</i></tt></td>
		    <td>Install common user executables in <i>dir</i> (defaults
			to <tt><i>eprefix</i>/bin</tt>).<br>
			See the note under <tt>--prefix</tt>, above.</td>
		</tr>
		<tr>
		    <td><tt>--sysconfdir=<i>dir</i></tt></td>
		    <td>Install configuration files (<tt>ibm_hosts</tt>,
			character sets) in <tt><i>dir</i>/x3270</tt> (defaults
			to <tt><i>prefix</i>/etc</tt>).<br>
			See the note under <tt>--prefix</tt>, above.</td>
		</tr>
		<tr>
		    <td><tt>--enable-app-defaults</tt><br>
			<tt>--enable-app-defaults=-UCOLOR</tt></td>
		    <td>Use a separate app-defaults file, instead of compiling
			one into the x3270 executable.<br>
			With the <tt>=-UCOLOR</tt> option, builds for a
			monochrome display.</td>
		</tr>
		<tr>
		    <td><tt>--with-fontdir=/<i>full-path</i></tt><br>
			<tt>--with-fontdir=<i>relative-path</i></tt></td>
		    <td>Install fonts in an alternate directory.<br>
			If the parameter starts with "/", it specifies the full
			pathname of a directory.<br>
			If not, it specifies a subdirectory of the system's
			X11 font directory (if using <tt>make install</tt>) or
			of the <tt>fonts</tt> subdirectory of the
			architecture-dependent install directory (if using
			<tt>make install.byprefix</tt>).<br>
			The default is <tt>misc</tt>.</td>
		</tr>
	    </tbody> 
	</table>
    </body>
</html>
